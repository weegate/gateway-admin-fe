{{define "body_content"}}
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <!-- BEGIN PAGE TITLE & BREADCRUMB-->
            <h3 class="page-title">
                策略运行时管理<small>&nbsp;添加策略运行时</small>
            </h3>

        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="clearfix">
        <form id="runtime_form" action="#">
            <div class="form-group">
                <label for="name">策略运行时服务名称</label>
                <input type="text" class="form-control" id="runtime_serverName" name="runtime_serverName" placeholder="策略运行时，所影响的服务名称">
            </div>
            <div class="form-group">
                <label for="name">所选单个策略</label>
                <select id="runtime_policyId" name="runtime_policyId" class="form-control" placeholder="请选择一个策略">
                    <option value="" >---请选择一个策略---</option>
                </select>
            </div>
            <div class="form-group">
                <label for="name">所选策略组</label>
                <select id="runtime_groupId" name="runtime_groupId" class="form-control" placeholder="请选择一个策略组">
                    <option value="" >---请选择一个策略组---</option>
                </select>
            </div>
            <div class="form-group">
                <label for="status">状态</label>
                <select id="runtime_status" name="runtime_status"  class="form-control">
                    <option value="0">通过</option>
                    <option value="1">未审核</option>
                    <option value="2">拒绝</option>
                    <option value="3">下线</option>
                    <option value="4">上线</option>
                </select>
            </div>
            <div class="form-group">
                <label for="name">是否删除</label>
                <select id="runtime_isDelete" name="runtime_isDelete"  class="form-control">
                    <option value="0">有效</option>
                    <option value="1">删除</option>
                </select>
            </div>
            <input type="submit" id="runtime_submit" class="btn btn-default" value="添加运行时策略">
        </form>
    </div>
</div>
<div class="row"></div>
<script src="/static/js/common/common-config.js"></script>
<script src="/static/js/abtest/runtime.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#runtime_policyId").select2({ 
            placeholder: "请选择一个策略",
        });
        runtime.getAvailablePolicies();
        
        $("#runtime_groupId").select2({
            placeholder: "请选择一个策略",
        });
        runtime.getAvailableGroups();
        
        
        $("#runtime_form").validate({
            rules : runtime_rules,
            messages : runtime_messages,
            submitHandler : function(form) {
                runtime.add();
                //alert($("#runtime_form").serialize()) ;
                //form.submit();
                //alert("div:"+$("#div_params_list").find('div[name="div_params_list_row"]').length);
                /*var paramRow = new Array;
				$("#div_params_list").find('div[name="div_params_list_row"]').each(function (){
					var obj = $(this).find(':input');
					var objItem = new  Object();
					$(this).find(':input').each(function (){
						if($(this).attr('name') == 'param_name'){
							objItem.param_name = $(this).val();
						}else if($(this).attr('name') == 'param_type'){
							objItem.param_type = $(this).val();
						}else if($(this).attr('name') == 'param_required'){
							objItem.param_required = $(this).val();
						}else if($(this).attr('name') == 'param_desc'){
							objItem.param_desc = $(this).val();
						}
					});
					paramRow.push(objItem);
				});*/
            }
        });
    });
</script>
{{end}}